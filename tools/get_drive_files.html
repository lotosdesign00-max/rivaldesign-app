<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Google Drive Files ID Getter</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 900px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 { color: #333; }
        input, button {
            padding: 12px;
            margin: 10px 0;
            width: 100%;
            box-sizing: border-box;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
        }
        button {
            background: #4285f4;
            color: white;
            border: none;
            cursor: pointer;
            font-weight: bold;
        }
        button:hover { background: #357ae8; }
        #result {
            margin-top: 20px;
            padding: 15px;
            background: #f9f9f9;
            border-radius: 5px;
            border: 1px solid #e0e0e0;
            white-space: pre-wrap;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            max-height: 400px;
            overflow-y: auto;
        }
        .info {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
            border-left: 4px solid #2196f3;
        }
        .error {
            background: #ffebee;
            color: #c62828;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
            border-left: 4px solid #f44336;
        }
        .success {
            background: #e8f5e9;
            color: #2e7d32;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
            border-left: 4px solid #4caf50;
        }
        .step {
            background: #fff3e0;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            border-left: 3px solid #ff9800;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üöÄ Google Drive Files ID Getter</h1>
        
        <div class="info">
            <strong>üìù –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:</strong><br>
            1. –ü–æ–ª—É—á–∏—Ç–µ Google API –∫–ª—é—á (—Å–º. GOOGLE_DRIVE_AUTO_INTEGRATION.md)<br>
            2. –í—Å—Ç–∞–≤—å—Ç–µ API –∫–ª—é—á –Ω–∏–∂–µ<br>
            3. –í—Å—Ç–∞–≤—å—Ç–µ ID –ø–∞–ø–∫–∏ —Å –≤–∞—à–∏–º–∏ —Ñ–∞–π–ª–∞–º–∏<br>
            4. –ù–∞–∂–º–∏—Ç–µ "–ü–æ–ª—É—á–∏—Ç—å —Ñ–∞–π–ª—ã"<br>
            5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ App.jsx
        </div>

        <div class="step">
            <strong>–®–∞–≥ 1:</strong> –í—Å—Ç–∞–≤—å—Ç–µ –≤–∞—à Google API –∫–ª—é—á
        </div>
        <input type="text" id="apiKey" placeholder="AIzaSy...–≤–∞—à_api_–∫–ª—é—á">

        <div class="step">
            <strong>–®–∞–≥ 2:</strong> –í—Å—Ç–∞–≤—å—Ç–µ ID –ø–∞–ø–∫–∏ –Ω–∞ Google Drive
        </div>
        <input type="text" id="folderId" placeholder="1ABC123xyz...">

        <div class="step">
            <strong>–®–∞–≥ 3:</strong> –í—ã–±–µ—Ä–∏—Ç–µ —è–∑—ã–∫
        </div>
        <select id="language" style="width: 100%; padding: 12px;">
            <option value="ru">–†—É—Å—Å–∫–∏–π</option>
            <option value="en">English</option>
        </select>

        <button onclick="getFiles()">üì• –ü–æ–ª—É—á–∏—Ç—å —Ñ–∞–π–ª—ã –∏–∑ –ø–∞–ø–∫–∏</button>

        <div id="status"></div>
        <div id="result"></div>

        <div class="info" style="margin-top: 20px;">
            <strong>üí° –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å ID –ø–∞–ø–∫–∏:</strong><br>
            –û—Ç–∫—Ä–æ–π—Ç–µ –ø–∞–ø–∫—É –Ω–∞ Google Drive, –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ URL:<br>
            <code>https://drive.google.com/drive/folders/<b>1ABC123xyz</b></code><br>
            ID –ø–∞–ø–∫–∏ = <b>1ABC123xyz</b>
        </div>
    </div>

    <script>
        async function getFiles() {
            const apiKey = document.getElementById('apiKey').value.trim();
            const folderId = document.getElementById('folderId').value.trim();
            const language = document.getElementById('language').value;
            const statusDiv = document.getElementById('status');
            const resultDiv = document.getElementById('result');

            // –í–∞–ª–∏–¥–∞—Ü–∏—è
            if (!apiKey) {
                statusDiv.innerHTML = '<div class="error">‚ùå –í–≤–µ–¥–∏—Ç–µ API –∫–ª—é—á!</div>';
                return;
            }
            if (!folderId) {
                statusDiv.innerHTML = '<div class="error">‚ùå –í–≤–µ–¥–∏—Ç–µ ID –ø–∞–ø–∫–∏!</div>';
                return;
            }

            statusDiv.innerHTML = '<div class="info">‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤...</div>';
            resultDiv.textContent = '';

            try {
                // –ó–∞–ø—Ä–æ—Å –∫ Google Drive API
                const url = `https://www.googleapis.com/drive/v3/files?` + new URLSearchParams({
                    q: `'${folderId}' in parents and trashed=false`,
                    key: apiKey,
                    fields: 'files(id,name,mimeType,size,thumbnailLink)',
                    orderBy: 'name'
                });

                const response = await fetch(url);
                const data = await response.json();

                if (data.error) {
                    statusDiv.innerHTML = `<div class="error">‚ùå –û—à–∏–±–∫–∞: ${data.error.message}</div>`;
                    return;
                }

                if (!data.files || data.files.length === 0) {
                    statusDiv.innerHTML = '<div class="error">‚ùå –§–∞–π–ª—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã –≤ —ç—Ç–æ–π –ø–∞–ø–∫–µ!</div>';
                    return;
                }

                // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞
                const code = generateCode(data.files, language);
                
                statusDiv.innerHTML = `<div class="success">‚úÖ –ù–∞–π–¥–µ–Ω–æ ${data.files.length} —Ñ–∞–π–ª–æ–≤! –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–æ–¥ –Ω–∏–∂–µ:</div>`;
                resultDiv.textContent = code;

            } catch (error) {
                statusDiv.innerHTML = `<div class="error">‚ùå –û—à–∏–±–∫–∞: ${error.message}</div>`;
            }
        }

        function generateCode(files, lang) {
            const categoryMap = {
                ru: {
                    'ttf': '–®—Ä–∏—Ñ—Ç—ã', 'otf': '–®—Ä–∏—Ñ—Ç—ã', 'woff': '–®—Ä–∏—Ñ—Ç—ã', 'woff2': '–®—Ä–∏—Ñ—Ç—ã',
                    'jpg': '–¢–µ–∫—Å—Ç—É—Ä—ã', 'jpeg': '–¢–µ–∫—Å—Ç—É—Ä—ã', 'png': '–¢–µ–∫—Å—Ç—É—Ä—ã', 'webp': '–¢–µ–∫—Å—Ç—É—Ä—ã',
                    'abr': '–ö–∏—Å—Ç–∏', 'brush': '–ö–∏—Å—Ç–∏',
                    'svg': '–ò–∫–æ–Ω–∫–∏', 'ai': '–ò–∫–æ–Ω–∫–∏', 'eps': '–ò–∫–æ–Ω–∫–∏', 'zip': '–ò–∫–æ–Ω–∫–∏'
                },
                en: {
                    'ttf': 'Fonts', 'otf': 'Fonts', 'woff': 'Fonts', 'woff2': 'Fonts',
                    'jpg': 'Textures', 'jpeg': 'Textures', 'png': 'Textures', 'webp': 'Textures',
                    'abr': 'Brushes', 'brush': 'Brushes',
                    'svg': 'Icons', 'ai': 'Icons', 'eps': 'Icons', 'zip': 'Icons'
                }
            };

            const map = categoryMap[lang];
            let code = `// ‚îÄ‚îÄ DESIGN PACK MATERIALS FROM GOOGLE DRIVE ‚îÄ‚îÄ\nconst DESIGN_PACK_MATERIALS = {\n  ${lang}: [\n`;

            files.forEach((file, index) => {
                const ext = file.name.split('.').pop().toLowerCase();
                const category = map[ext] || (lang === 'ru' ? '–î—Ä—É–≥–æ–µ' : 'Other');
                const size = formatFileSize(file.size);

                code += `    {\n`;
                code += `      id: ${index + 1},\n`;
                code += `      name: "${file.name}",\n`;
                code += `      category: "${category}",\n`;
                code += `      size: "${size}",\n`;
                code += `      fileId: "${file.id}",\n`;
                code += `      preview: "https://drive.google.com/thumbnail?id=${file.id}&sz=w400"\n`;
                code += `    },\n`;
            });

            code += `  ]\n};\n`;
            code += `DESIGN_PACK_MATERIALS.ua = DESIGN_PACK_MATERIALS.ru;\n`;
            code += `DESIGN_PACK_MATERIALS.kz = DESIGN_PACK_MATERIALS.ru;\n`;
            code += `DESIGN_PACK_MATERIALS.by = DESIGN_PACK_MATERIALS.ru;\n`;
            code += `DESIGN_PACK_MATERIALS.en = DESIGN_PACK_MATERIALS.${lang};\n`;

            return code;
        }

        function formatFileSize(bytes) {
            if (!bytes) return 'Unknown';
            const sizes = ['B', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(1024));
            return Math.round(bytes / Math.pow(1024, i) * 100) / 100 + ' ' + sizes[i];
        }
    </script>
</body>
</html>
