{"version":3,"file":"utils.js","sourceRoot":"","sources":["../../../src/messenger/utils.ts"],"names":[],"mappings":"AAAA,0CAA0C;AAE1C;;;GAGG;AACH,MAAM,CAAC,IAAM,eAAe,GAAG,UAAC,GAAW;IACzC,uEAAuE;IACvE,IAAM,QAAQ,GAAG,QAAQ,CAAC,aAAa,CAAC,uBAAe,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,QAAI,CAAC,CAAC;IAC5E,IAAI,QAAQ,EAAE;QACZ,OAAO,OAAO,CAAC,OAAO,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;KAC1C;IAED,OAAO,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM;;QACjC,IAAI;YACF,IAAM,aAAa,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;YACvD,aAAa,CAAC,IAAI,GAAG,iBAAiB,CAAC;YACvC,aAAa,CAAC,KAAK,GAAG,IAAI,CAAC;YAC3B,aAAa,CAAC,GAAG,GAAG,GAAG,CAAC;YACxB,aAAa,CAAC,gBAAgB,CAC5B,MAAM,EACN;gBACE,OAAO,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;YAC5B,CAAC,EACD,EAAE,IAAI,EAAE,IAAI,EAAE,CACf,CAAC;YACF,aAAa,CAAC,gBAAgB,CAAC,OAAO,EAAE;gBACtC,MAAM,CAAC;oBACL,MAAM,EAAE,KAAK;oBACb,OAAO,EAAE,oCAA6B,GAAG,CAAE;iBAC5C,CAAC,CAAC;YACL,CAAC,CAAC,CAAC;YACH,0BAA0B;YAC1B,MAAA,QAAQ,CAAC,IAAI,0CAAE,WAAW,CAAC,aAAa,CAAC,CAAC;SAC3C;QAAC,OAAO,KAAK,EAAE;YACd,0BAA0B;YAC1B,MAAM,CAAC,KAAK,CAAC,CAAC;SACf;IACH,CAAC,CAAC,CAAC;AACL,CAAC,CAAC;AAEF;;GAEG;AACH,MAAM,UAAU,gBAAgB;IAC9B,OAAO,UAAG,IAAI,CAAC,GAAG,EAAE,cAAI,IAAI,CAAC,MAAM,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAE,CAAC;AACpE,CAAC","sourcesContent":["/* eslint-disable no-restricted-globals */\n\n/**\n * Dynamically loads an external script by appending a <script> tag to the document head.\n * Deduplicates by checking if a script with the same src already exists.\n */\nexport const asyncLoadScript = (url: string): Promise<{ status: boolean }> => {\n  // Dedup: if a script with this src already exists, resolve immediately\n  const existing = document.querySelector(`script[src=\"${CSS.escape(url)}\"]`);\n  if (existing) {\n    return Promise.resolve({ status: true });\n  }\n\n  return new Promise((resolve, reject) => {\n    try {\n      const scriptElement = document.createElement('script');\n      scriptElement.type = 'text/javascript';\n      scriptElement.async = true;\n      scriptElement.src = url;\n      scriptElement.addEventListener(\n        'load',\n        () => {\n          resolve({ status: true });\n        },\n        { once: true },\n      );\n      scriptElement.addEventListener('error', () => {\n        reject({\n          status: false,\n          message: `Failed to load the script ${url}`,\n        });\n      });\n      /* istanbul ignore next */\n      document.head?.appendChild(scriptElement);\n    } catch (error) {\n      /* istanbul ignore next */\n      reject(error);\n    }\n  });\n};\n\n/**\n * Generates a simple unique ID for message request/response correlation.\n */\nexport function generateUniqueId(): string {\n  return `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n}\n"]}